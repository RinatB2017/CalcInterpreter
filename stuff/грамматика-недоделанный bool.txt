http://ru.wikipedia.org/wiki/Расширенная_форма_Бэкуса_—_Наура

Вместо некоторых терминалов (MUL, DIV, LP, ...) для наглядности
записаны соответствующие им лексемы, заключённые в '':
'*', '/', '(', ...
Начиная с символов '//' - и до конца строки - комметарий

В stricted-режимер для строки aa^2 + b^3 - log(x-1)
интерпретатор построит и вернёт тип vector

program = 
	{ ';' | intsr } EXIT

intsr = 
		if_
	|	do_
	|	while_
	|	bool ';'
	|	
	|	void_func ';'
	|	sys_equation ';'

sys_equation =
	equation { ',' equation }
	
equation =
	expr '===' expr // проверка типов и значений отсечёт ненуравнения, например 2===6

block = 
		'{'	{ ';' | instr } '}'
	|	instr // ';' не нужен из-за if(1){if(2){}}
	
if_ =
		'if' '(' bool ')' block  [ 'else' block ]

while =
	'while' '(' bool ')' block
	
do =
	'do' block 'while' '(' bool ')' ';' 

bool =
	rel { ( '==' | '!=' ) rel }

rel	=
	expr { ( '<' | '<=' | '>=' | '>' ) expr }
	
expr =
		term { ( '+' | '(+)' | '-' ) term }
	
term =
		persent { ( '*' | '/' ) persent }
	
// 100+100+2^3% == 216
persent =
		power [ '%' ]

// 3!^2 == 36, 2^3^4 = 2^(3^4)
// проверить, можно ли убрать цикл из power
power =
		factorial [ '^' power ]

factorial =
	prim { '!' }
	
prim =
		NUM
	|	DOUBLE
	|	BOOLEAN
	|	vector // (1, 2, 3) или одновектор (4-1), что без вопросов приводится к int
	|	'.' USER_DEFINED_NAME
	|	USER_DEFINED_NAME right
	|	'-' prim
	|	predefined_func
	
right =
		'=' expr // a=8-9*7, a = (1, 2, 3)
	|	'(' func_подст ')' // a(e, 99)
	|	{ '[' expr ']' } // a[7-5][1] или a

vector =
	'(' func_подст ')' [ postfix_func ]
	
func_args =
	USER_DEFINED_NAME { ',' USER_DEFINED_NAME }

func_подст =
	expr { ',' expr }

predefined_func =
		of_radian '(' expr ')'
	|	returns_radian '(' expr ')'
	|	dimensionless '(' expr ')' // безразмерные ф-ии, например LOG

// Безразмерные ф-ии
dimensionless =
		D // дифференциал
	|	INTEGRATE // интеграл
	|	LOG

of_radian =
		SIN
	|	COS

returns_radian =
		ARCSIN
	|	ARCCOS

void_func =
		print
	|	add
	|	del
	|	reset
	|	set
	|	help
	|	state
	
print =
		PRINT
	|	PRINT expr

add =
		USER_DEFINED_NAME [ '=' expr] // для обычных переменных или полиномов-векторов, получающихся из многочленов, эта переменная может присваивать значение любого примитивного типа.
	|	USER_DEFINED_NAME '(' func_args ')' '=' expr // определение ф-ии, например tg(x) = sin(x) '/' cos(x).
		В интерпретаторе для избежания получения значения x используем НОВОЕ ОКРУЖЕНИЕ, содержащее ссылки на подставляемую переменную.
		Если нужно получить значение x:
		tg(x) = sin(x) '/' cos(.x)
	
del =
		DEL '*'
	|	DEL USER_DEFINED_NAME
	
reset =
		RESET '*'
	|	RESET setname
	|	RESET TABLE
	
set =
	SET setname '=' currTok
	
setname =
	ARGS_AUTO_END | AUTO_END | PRINT_TOKENS
	| PRECISION | ERRORS | STRICTED | AUTO_PRINT | GREEDY_FUNC
	
help =
	HELP
	
state =
	STATE